<div ng-include="'partials/navbar'"></div>

<div class="row">
	<div id="bleep-list-title">
		Select a BLEEP to Edit:
	</div>
	<div id="bleep-list" class="list-group col-md-6" ng-repeat="bleep in bleepData.bleeps">
		<a ng-click="editBleep(bleep)" href="#" ng-show="bleep.name" ng-class="itemClass(bleep)">
			{{bleep.name}} <span class="badge">{{bleep.beacons.length}}</span>
		</a>

		<a ng-click="editBleep(bleep)" href="#" ng-hide="bleep.name" ng-class="itemClass(bleep)">
			{{bleep.address}} <span class="badge">{{bleep.beacons.length}}</span>
		</a>
	</div>

	<div id="bleep-edit" class="col-md-6 well well-sm" ng-show="selectedBleep">
		<form class="form-horizontal" role="form">
			<div class="form-group">
				<label for="inputEmail3" class="col-sm-2 control-label">Name</label>
				<div class="col-sm-10">
					<input type="text" class="form-control" id="bleep-name" placeholder="Name" ng-model="selectedBleep.name" ng-change="setBleepChanged()">
				</div>
			</div>
			<div class="form-group">
				<label for="inputPassword3" class="col-sm-2 control-label">Address</label>
				<div id="bleep-address" class="col-sm-10">
					{{selectedBleep.address}}
				</div>
			</div>
			<div class="form-group">
				<label for="inputPassword3" class="col-sm-2 control-label">Beacons</label>
				<div id="bleep-edit-beacons" class="col-sm-9 list-group">
					<div ng-repeat="beacon in selectedBleep.beacons">
						<a ng-click="showBeacon(beacon)" href="#" ng-class="beaconItemClass(beacon)" data-toggle="modal">
							<span ng-show="beacon.name">
								{{beacon.name}}
							</span>
							<span ng-hide="beacon.name">
								{{beacon.address}}
							</span>
						</a>
					</div>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-primary" ng-click="saveBleep()" ng-disabled="!bleepChanged"><i class="glyphicon glyphicon-save"></i> Save</button>
				</div>
			</div>
		</form>
	</div>
</div>

<div>
    <script type="text/ng-template" id="bleep-beacon-modal-content">
        <div class="modal-header">
            <h4>Beacon</h4>
        </div>
        <form class="form-horizontal" role="form">
	        <div class="modal-body">
	        	<div class="form-group">
		        	<label class="col-sm-2 control-label">Name</label>
		        	<div class="col-sm-10">
		        		<input type="text" class="form-control" ng-model="selectedBeacon.name" ng-change="setBeaconChanged()">
		        	</div>
		        </div>
		        <div class="form-group">
		        	<label class="col-sm-2 control-label">Address</label>
		        	<div class="col-sm-10">
		        		<input type="text" class="form-control" ng-model="selectedBeacon.address" ng-disabled="true">
		        	</div>
		        </div>
		        <div class="form-group">
		        	<label class="col-sm-2 control-label">RSSI</label>
		        	<div class="col-sm-10">
		        		<input type="text" class="form-control" ng-model="selectedBeacon.rssi" ng-disabled="true">
		        	</div>
		        </div>
		        <div class="form-group">
		        	<label class="col-sm-2 control-label">Updated</label>
		        	<div class="col-sm-10">
		        		<input type="text" class="form-control" ng-model="selectedBeacon.updated" ng-disabled="true">
		        	</div>
		        </div>
		        <div class="form-group">
		        	<label class="col-sm-2 control-label">Created</label>
		        	<div class="col-sm-10">
		        		<input type="text" class="form-control" ng-model="selectedBeacon.created" ng-disabled="true">
		        	</div>
		        </div>
	        </div>
	        <div class="modal-footer">
	        	<button type="submit" class="btn btn-primary" ng-click="save()" ng-disabled="!beaconChanged">
				 	<i class="glyphicon glyphicon-save"></i> Save
				 </button>
	            <button class="btn btn-primary" ng-click="close()">Close</button>
	        </div>
        </form>
    </script>
</div>
